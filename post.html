<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="pageTitle">ê¸€ ì½ê¸° | ì´ì§€í¬ ë¸”ë¡œê·¸</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
  
  <!-- Markdown íŒŒì‹± ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
  <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
  
  <!-- ì½”ë“œ í•˜ì´ë¼ì´íŒ… -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --bg: #08080e; --bg2: #0e0e18; --bg3: #13131f;
      --surface: #191926; --surface2: #222235;
      --border: rgba(255,255,255,0.06);
      --accent: #7165f0; --accent2: #a89eff; --accent3: #5eead4;
      --text: #eeeef5; --text2: #8888a8; --text3: #44445a;
      --nav-h: 64px; --radius: 16px;
    }
    html { scroll-behavior: smooth; }
    body { font-family: 'Pretendard', -apple-system, sans-serif; background: var(--bg); color: var(--text); overflow-x: hidden; line-height: 1.7; }
    ::selection { background: rgba(113,101,240,0.3); }
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--surface2); border-radius: 99px; }

    /* NAV */
    nav {
      position: fixed; top: 0; left: 0; right: 0; height: var(--nav-h);
      background: rgba(8,8,14,0.85); backdrop-filter: blur(24px);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 5%; z-index: 1000; transition: background 0.3s;
    }
    .logo {
      font-family: 'JetBrains Mono', monospace; font-size: 1rem; font-weight: 600;
      color: var(--text); text-decoration: none;
      display: flex; align-items: center; gap: 10px;
    }
    .logo-icon {
      width: 34px; height: 34px; border-radius: 10px;
      background: linear-gradient(135deg, var(--accent), #5b8af0);
      display: flex; align-items: center; justify-content: center;
      font-size: 1rem; box-shadow: 0 0 20px rgba(113,101,240,0.4);
    }
    .nav-links { display: flex; gap: 1.75rem; list-style: none; }
    .nav-links a {
      color: var(--text2); text-decoration: none; font-size: 0.85rem; font-weight: 500;
      transition: color 0.2s;
    }
    .nav-links a:hover, .nav-links a.active { color: var(--text); }
    .back-btn {
      display: inline-flex; align-items: center; gap: 6px;
      background: var(--surface); border: 1px solid var(--border);
      color: var(--text2); padding: 0.45rem 1rem;
      border-radius: 8px; text-decoration: none;
      font-size: 0.82rem; font-weight: 500;
      transition: all 0.2s;
    }
    .back-btn:hover { background: var(--surface2); color: var(--text); }

    /* ARTICLE */
    article {
      max-width: 800px; margin: 0 auto;
      padding: calc(var(--nav-h) + 3rem) 2rem 5rem;
    }

    .article-header {
      border-bottom: 1px solid var(--border);
      padding-bottom: 2rem; margin-bottom: 3rem;
    }
    .article-category {
      font-family: 'JetBrains Mono', monospace;
      background: rgba(113,101,240,0.15); color: var(--accent2);
      border: 1px solid rgba(113,101,240,0.25);
      padding: 0.25rem 0.7rem; border-radius: 4px;
      font-size: 0.75rem; font-weight: 600;
      text-transform: uppercase; letter-spacing: 0.05em;
      display: inline-block; margin-bottom: 1.25rem;
    }
    .article-title {
      font-size: clamp(1.8rem, 4vw, 2.8rem);
      font-weight: 900; line-height: 1.25;
      letter-spacing: -0.03em; margin-bottom: 1rem;
    }
    .article-meta {
      display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;
      font-size: 0.85rem; color: var(--text3);
    }
    .article-meta span {
      display: flex; align-items: center; gap: 6px;
    }
    .article-tags {
      display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;
    }
    .article-tag {
      font-size: 0.75rem; background: var(--surface);
      color: var(--text2); padding: 0.25rem 0.65rem;
      border-radius: 5px; border: 1px solid var(--border);
    }

    /* MARKDOWN CONTENT */
    .markdown-body {
      color: var(--text2);
      font-size: 1rem;
      line-height: 1.85;
    }
    .markdown-body > * + * { margin-top: 1.5rem; }
    
    .markdown-body h1, .markdown-body h2, .markdown-body h3,
    .markdown-body h4, .markdown-body h5, .markdown-body h6 {
      color: var(--text);
      font-weight: 700;
      line-height: 1.3;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
    }
    .markdown-body h1 { font-size: 2rem; border-bottom: 2px solid var(--border); padding-bottom: 0.5rem; }
    .markdown-body h2 { font-size: 1.6rem; border-bottom: 1px solid var(--border); padding-bottom: 0.4rem; }
    .markdown-body h3 { font-size: 1.3rem; }
    .markdown-body h4 { font-size: 1.1rem; }

    .markdown-body p { margin-bottom: 1.25rem; }
    .markdown-body strong { color: var(--text); font-weight: 700; }
    .markdown-body em { color: var(--accent2); font-style: italic; }
    
    .markdown-body a {
      color: var(--accent2);
      text-decoration: none;
      border-bottom: 1px solid rgba(168,158,255,0.3);
      transition: border-color 0.2s;
    }
    .markdown-body a:hover { border-bottom-color: var(--accent2); }

    .markdown-body ul, .markdown-body ol {
      padding-left: 1.75rem;
      margin-bottom: 1.25rem;
    }
    .markdown-body li { margin-bottom: 0.5rem; }
    .markdown-body li::marker { color: var(--accent3); }

    .markdown-body blockquote {
      border-left: 4px solid var(--accent);
      padding-left: 1.25rem;
      margin-left: 0;
      font-style: italic;
      color: var(--text2);
      background: var(--surface);
      padding: 1rem 1.25rem;
      border-radius: 0 8px 8px 0;
    }

    .markdown-body code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.88em;
      background: var(--surface);
      color: var(--accent3);
      padding: 0.2em 0.5em;
      border-radius: 4px;
      border: 1px solid var(--border);
    }
    .markdown-body pre {
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1.25rem;
      overflow-x: auto;
      margin-bottom: 1.5rem;
    }
    .markdown-body pre code {
      background: transparent;
      border: none;
      padding: 0;
      color: inherit;
      font-size: 0.88rem;
    }

    .markdown-body img {
      max-width: 100%;
      height: auto;
      border-radius: 10px;
      margin: 1.5rem 0;
      border: 1px solid var(--border);
    }

    .markdown-body hr {
      border: none;
      border-top: 1px solid var(--border);
      margin: 2.5rem 0;
    }

    .markdown-body table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      font-size: 0.9rem;
    }
    .markdown-body th, .markdown-body td {
      border: 1px solid var(--border);
      padding: 0.75rem;
      text-align: left;
    }
    .markdown-body th {
      background: var(--surface);
      color: var(--text);
      font-weight: 600;
    }

    .loading {
      text-align: center; padding: 5rem 2rem;
      color: var(--text3); font-size: 1rem;
    }
    .loading::before { content: 'â³'; font-size: 2rem; display: block; margin-bottom: 1rem; }

    /* FOOTER */
    footer {
      background: var(--bg); border-top: 1px solid var(--border);
      padding: 2rem 5%; text-align: center;
      color: var(--text3); font-size: 0.8rem;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      article { padding: calc(var(--nav-h) + 2rem) 1.25rem 3rem; }
      .article-title { font-size: 1.8rem; }
      .markdown-body { font-size: 0.95rem; }
      .markdown-body pre { padding: 1rem; }
    }
  </style>
</head>
<body>

<!-- NAV -->
<nav id="navbar">
  <a class="logo" href="blog.html">
    <div class="logo-icon">ğŸ€</div>
    Zoe.ios
  </a>
  <ul class="nav-links">
    <li><a href="blog.html" class="active">ë¸”ë¡œê·¸</a></li>
    <li><a href="https://github.com/Zoe0929" target="_blank">GitHub</a></li>
  </ul>
  <a href="blog.html" class="back-btn">â† ëª©ë¡ìœ¼ë¡œ</a>
</nav>

<!-- ARTICLE -->
<article id="article">
  <div class="loading">ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
</article>

<!-- FOOTER -->
<footer>
  Â© 2025 ì´ì§€í¬ (Lee JiHee) Â· iOS Developer
</footer>

<script>
  // Navbar scroll
  window.addEventListener('scroll', () => {
    document.getElementById('navbar').style.background =
      window.scrollY > 30 ? 'rgba(8,8,14,0.97)' : 'rgba(8,8,14,0.85)';
  });

  // âš ï¸ GitHub ì •ë³´ (blog.htmlê³¼ ë™ì¼í•˜ê²Œ ì„¤ì •)
  const GITHUB_USER = 'Zoe0929';
  const GITHUB_REPO = 'blog';
  const POSTS_FOLDER = 'posts';

  // URLì—ì„œ íŒŒì¼ëª… ì¶”ì¶œ
  const params = new URLSearchParams(window.location.search);
  const filename = params.get('file');

  if (!filename) {
    document.getElementById('article').innerHTML = `
      <div class="loading">ì˜ëª»ëœ ì ‘ê·¼ì…ë‹ˆë‹¤.<br/><a href="blog.html" style="color:var(--accent2)">ë¸”ë¡œê·¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a></div>
    `;
  } else {
    loadPost(filename);
  }

  async function loadPost(filename) {
    try {
      const url = `https://raw.githubusercontent.com/${GITHUB_USER}/${GITHUB_REPO}/main/${POSTS_FOLDER}/${filename}`;
      const response = await fetch(url);
      
      if (!response.ok) throw new Error('íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      
      const content = await response.text();
      renderPost(filename, content);
      
    } catch (error) {
      document.getElementById('article').innerHTML = `
        <div class="loading" style="color:var(--red)">
          âš ï¸ ${error.message}<br/><br/>
          <a href="blog.html" style="color:var(--accent2); text-decoration:underline;">ë¸”ë¡œê·¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
        </div>
      `;
    }
  }

  function renderPost(filename, content) {
    // Front matter íŒŒì‹±
    const frontMatterRegex = /^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/;
    const match = content.match(frontMatterRegex);

    let title = filename.replace('.md', '').replace(/-/g, ' ');
    let category = 'iOS';
    let tags = [];
    let date = '';
    let body = content;

    if (match) {
      const frontMatter = match[1];
      body = match[2];

      const titleMatch = frontMatter.match(/title:\s*["']?(.+?)["']?\s*$/m);
      const categoryMatch = frontMatter.match(/category:\s*["']?(.+?)["']?\s*$/m);
      const tagsMatch = frontMatter.match(/tags:\s*\[(.+?)\]/);
      const dateMatch = frontMatter.match(/date:\s*["']?(.+?)["']?\s*$/m);

      if (titleMatch) title = titleMatch[1];
      if (categoryMatch) category = categoryMatch[1];
      if (tagsMatch) tags = tagsMatch[1].split(',').map(t => t.trim());
      if (dateMatch) date = dateMatch[1];
    }

    // íŒŒì¼ëª…ì—ì„œ ë‚ ì§œ ì¶”ì¶œ
    if (!date) {
      const dateMatch = filename.match(/^(\d{4}-\d{2}-\d{2})/);
      if (dateMatch) date = dateMatch[1];
    }

    // Markdown â†’ HTML ë³€í™˜
    marked.setOptions({
      highlight: function(code, lang) {
        if (lang && hljs.getLanguage(lang)) {
          return hljs.highlight(code, { language: lang }).value;
        }
        return hljs.highlightAuto(code).value;
      },
      breaks: true,
      gfm: true
    });

    const htmlContent = marked.parse(body);

    // ë Œë”ë§
    document.getElementById('article').innerHTML = `
      <div class="article-header">
        <span class="article-category">${category}</span>
        <h1 class="article-title">${title}</h1>
        <div class="article-meta">
          ${date ? `<span>ğŸ“… ${date}</span>` : ''}
          <span>â±ï¸ ${estimateReadTime(body)}ë¶„ ì½ê¸°</span>
        </div>
        ${tags.length > 0 ? `
        <div class="article-tags">
          ${tags.map(tag => `<span class="article-tag">#${tag}</span>`).join('')}
        </div>
        ` : ''}
      </div>
      <div class="markdown-body">
        ${htmlContent}
      </div>
    `;

    document.getElementById('pageTitle').textContent = `${title} | ì´ì§€í¬ ë¸”ë¡œê·¸`;
  }

  function estimateReadTime(text) {
    const wordsPerMinute = 200;
    const wordCount = text.trim().split(/\s+/).length;
    return Math.ceil(wordCount / wordsPerMinute);
  }
</script>
</body>
</html>
